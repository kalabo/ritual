@model PagedList.IPagedList<Ritual.Data.Location>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Ritual Locations - Management";
}
<section class="content-header">
    <div class="row">
        <div class="large-8 columns">
            <h1>@ViewBag.Title</h1>
        </div>
        <div class="large-4 columns">
            @Html.ActionLink("Create New", "Create", "", new { @class = "button small right" })
        </div>
    </div>
</section>
<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="large-12 columns">
            <div class="row">
                <div class="large-6 medium-6 columns">
                    @using (Html.BeginForm())
                    {
                        <label class="control-label">Location Search</label>
                        <p>Find by name, country or address:</p>
                        @Html.TextBox("SearchString", "", new { @class = "form-control" })
                        <input type="submit" class="button" name="Command" value="Search" />
                        <input type="submit" class="button" name="Command" value="Reset" />
                    }
                </div>
                <div class="large-6 medium-6 columns">
                    <div id="ritualMap"></div>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns">


                    <table class="table">
                        <tr>
                            <th>
                                @Html.ActionLink("Name", "Index", new { sortOrder = ViewBag.NameSortParm })
                            </th>
                            <th>
                               Addres
                            </th>
                            <th>
                                Phone Number
                            </th>
                            <th>
                                Post Code
                            </th>
                            <th>
                                @Html.ActionLink("Country", "Index", new { sortOrder = ViewBag.CountrySortParm })
                            </th>
                            <th>Action</th>
                        </tr>

                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Address)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.PhoneNumber)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.PostCode)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Country)
                                </td>
                                <td>
                                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }, new { @class = "button" })
                                    @Html.ActionLink("Details", "Details", new { id = item.Id }, new { @class = "button" })
                                    <a href="#" class="button center-ritual-map" data-long="@item.Longitude" data-lat="@item.Latitude"><i class="fa fa-map-marker"></i></a>
                                </td>
                            </tr>
                        }

                    </table>
                    <br />
                    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

                    @Html.PagedListPager(Model, page => Url.Action("Index", new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script type="text/javascript"/>
    $(document).ready(function(){
        RITUAL.Core.Locations.Listing();
    });
    </script>
}